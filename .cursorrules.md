[AKTREA LMS Refactor 2.0] - AI Operating Rules
This file contains the mandatory rules for any AI assistant (including Cursor) operating on this codebase. These rules ensure stability, prevent errors, and maintain a clean audit trail. All actions must comply with this document.

1. Core Mission & Guiding Principles
   Primary Goal: Systematically refactor the LMS to be lean, stable, and professionally branded, starting from a pristine codebase.

Golden Rule: Stability Over Speed. Every action must prioritize a working system over rapid progress.

Bedrock Principle: Working First, Optimize Second. We do not modify, remove, or de-brand any part of the application until a fully working, tagged "Golden Baseline" (v2.0-working-baseline) is successfully established.

2. File System & Directory Protocol
   Rule 2.1 (The Archive): To "delete" any file or directory, you MUST move it to the /\_archive/ directory. NEVER use rm or permanent delete. The archive is the only valid destination for removed components.

Rule 2.2 (The Documentation Hub): All project documentation (plans, logs, analysis) MUST be created and maintained exclusively within the /\_refactor/ directory. Do not create documentation anywhere else.

Rule 2.3 (The Log): After every significant action (e.g., a successful component removal, applying a major fix), you MUST append a new entry to /\_refactor/REFACTORING_LOG.md.

Rule 2.4 (Secrets): The .env file is strictly off-limits. NEVER read, modify, or display the contents of the .env file. It should always be present in .gitignore.

3. Git Workflow Mandates
   Rule 3.1 (Main Branch): The main branch is for stable, tagged releases only. NEVER commit directly to main.

Rule 3.2 (Feature Branches): All work MUST be performed on a dedicated, descriptively named feature branch (e.g., feature/remove-mod-chat, fix/apply-akt-capability-check).

4. CRITICAL: The Component Removal Protocol
   This is the most important set of rules. Follow this exact sequence for EVERY component removal.

Rule 4.1 (One at a Time): You may only attempt to remove ONE component at a time, in a dedicated feature branch. NEVER bundle multiple removals together.

Rule 4.2 (Pre-Analysis): Before archiving a component, you MUST perform a full codebase search for its name and document any found dependencies in /\_refactor/COMPONENT_ANALYSIS.md.

Rule 4.3 (Archive, Don't Delete): Move the single component's directory to /\_archive/. Commit this one change.

Rule 4.4 (Mandatory Re-Installation Test): After archiving the component, you MUST guide the user through a full re-installation test from a clean slate. The required steps are:

docker-compose down -v (to destroy the database)

docker-compose up -d --build (to start fresh)

Verify that a complete, end-to-end installation from the web wizard is successful.

Rule 4.5 (Evaluate the Test):

On Success: If the installation completes without error, the change is valid. It can be merged. Log the success in REFACTORING_LOG.md.

On Failure: If any error occurs, the experiment has failed. The branch MUST be abandoned. You MUST document the discovered dependency in /\_refactor/COMPONENT_ANALYSIS.md. Do not attempt to fix the error; the failure itself provides the necessary data.

5. Code Modification & Baseline Rules
   Rule 5.1 (The First Fix): The very first code change applied to the pristine codebase MUST be the permanent fix for the AKT plugin installation dependency, as documented in /\_refactor/03_KNOWLEDGE_BASE.md. Apply this fix before the first attempt to create the v2.0-working-baseline.

Rule 5.2 (De-branding Protocol): De-branding is a low priority and MUST only occur after the system is optimized (Phase 3). All changes must be cosmetic (templates and language files) and confined to feature branches.

6. Prohibited Actions
   NEVER permanently delete files or directories. Use the /\_archive/ directory.

NEVER perform bulk component removals.

NEVER skip the full re-installation test after a component is archived.

NEVER commit directly to the main branch.

NEVER read or display secrets from the .env file.
